{% load static %}
{% load lucide %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}PatitasFelizes - Sistema de Turnos Veterinaria{% endblock %}</title>
    <link rel="stylesheet" href="{% static 'css/Style.css' %}">
    {% block extra_css %}{% endblock %}
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar">
        <div class="container">
            <div class="navbar-content">
                <a href="/" class="navbar-logo">{% lucide "paw-print" %} PatitasFelices</a>
                
                <button class="navbar-toggle" id="navToggle" aria-label="Toggle menu">
                    <span id="menuIcon">{% lucide "menu" %}</span>
                </button>
                
                <ul class="navbar-menu" id="navMenu">
                    <li><a href="/nosotros">Nosotros</a></li>
                    <li><a href="/contacto">Contacto</a></li>
                    <li><a href="/turnos" class="btn">Reservar Turno</a></li>
                    {% if request.user.is_authenticated %}
                      <li><a href="/administracion">Panel</a></li>
                      <li><a href="#" id="openPerfil" aria-label="Perfil">{% lucide "circle-user" %}</a></li>
                      <li><a href="/logout" aria-label="Salir">{% lucide "log-out" %}</a></li>
                    {% else %}
                      <li><a href="/login" aria-label="Ingresar">{% lucide "log-in" %}</a></li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main>
        {% block content %}{% endblock %}
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-grid">
                    <div class="footer-section">
                        <h3>{% lucide "paw-print" %} PatitasFelizes</h3>
                        <p>Cuidamos de tu mascota con profesionalismo, dedicación y mucho amor.</p>
                    </div>

                    <div class="footer-section">
                        <h4>Enlaces Rápidos</h4>
                        <div class="footer-links">
                            <a href="/">Inicio</a>
                            <a href="/nosotros">Nosotros</a>
                            <a href="/contacto">Contacto</a>
                            <a href="/turnos">Turnos</a>
                        </div>
                    </div>

                    <div class="footer-section">
                        <h4>Contacto</h4>
                        <div class="footer-contact-item">
                            <span>{% lucide "phone" %}</span>
                            <span>+54 11 1234-5678</span>
                        </div>
                        <div class="footer-contact-item">
                            <span>{% lucide "mail" %}</span>
                            <span>info@vetcare.com</span>
                        </div>
                        <div class="footer-contact-item">
                            <span>{% lucide "map-pin" %}</span>
                            <span>Av. Principal 1234, Ciudad</span>
                        </div>
                        <div class="footer-social">
                            <a href="#" aria-label="Facebook">{% lucide "facebook" %}</a>
                            <a href="#" aria-label="Instagram">{% lucide "instagram" %}</a>
                        </div>
                    </div>
                </div>

                <div class="footer-bottom">
                    <p>&copy; 2025 PatitasFelizes. Todos los derechos reservados.</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Modal Perfil Usuario -->
    {% if request.user.is_authenticated %}
    <div id="perfilModal" class="modal" aria-hidden="true" style="display:none;">
      <div class="modal-content">
        <button class="modal-close" id="closePerfil" aria-label="Cerrar">×</button>
        <h3 class="section-title">Perfil de Usuario</h3>
        <form method="post" action="/perfil/" class="card" style="padding:1rem;">
          {% csrf_token %}
          <div class="form-group">
            <label class="form-label">Nombre</label>
            <input type="text" name="first_name" class="form-input" value="{{ request.user.first_name }}" required />
          </div>
          <div class="form-group">
            <label class="form-label">Apellido</label>
            <input type="text" name="last_name" class="form-input" value="{{ request.user.last_name }}" required />
          </div>
          <div class="form-group">
            <label class="form-label">Email</label>
            <input type="email" class="form-input" value="{{ request.user.email }}" disabled />
          </div>
          <div class="form-group">
            <label class="form-label">Teléfono</label>
            <input type="text" name="telefono" class="form-input" value="{{ request.user.usuario_profile.telefono }}" />
          </div>
          <div class="form-group">
            <label class="form-label">Rol</label>
            <input type="text" class="form-input" value="{% if request.user.is_superuser %}SuperUsuario{% else %}{{ request.user.usuario_profile.rol.nombre_rol|default:'Sin rol' }}{% endif %}" disabled />
          </div>
          <div style="display:flex; gap:0.5rem;">
            <button class="btn" type="submit">Guardar</button>
            <a class="btn" href="/password/reset/">Cambiar Contraseña</a>
          </div>
        </form>
      </div>
    </div>
    {% endif %}

    <script src="{% static 'Js/MenuMobil.js' %}"></script>
    <script src="{% static 'Js/PerfilUsuario.js' %}"></script>

    {% block extra_js %}{% endblock %}
</body>
</html>
